<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title></title>
    <link rel="stylesheet" href="./style.css">
  </head>
  <body>
    <header>
      <h1 class="title">Automatica</h1>
    </header>
    <div class="container">
      <div class="sidebar">
        <h2 id="table-of-contents">Table of contents</h2>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="introduction.html">Introduction</a></li>
          <li><a href="description.html">Description</a></li>
          <li><a href="requirements.html">Requirements</a></li>
          <li><a href="test_plan.html">Test plan</a></li>
          <li><a href="continuous_integration.html">Continuous integration</a></li>
          <li><a href="references.html">References</a></li>
        </ul>
        <h2 id="sections">Sections</h2>
        <nav id="toc">
          <ul>
          <li><a href="#test-plan">Test Plan</a><ul>
          <li><a href="#black-box-testing">Black box testing</a></li>
          <li><a href="#white-box-testing">White box testing</a></li>
          <li><a href="#documentation-tests">Documentation tests</a></li>
          <li><a href="#test-coverage">Test coverage</a></li>
          </ul></li>
          </ul>
        </nav>
        <h2 id="external-links">External links</h2>
        <ul>
          <li><a href="https://gitlab.com/daingun/automatica">Source code repository</a></li>
          <li><a href="https://crates.io/crates/automatica">Crate registry</a></li>
          <li><a href="https://docs.rs/automatica">API documentation</a></li>
        </ul>
      </div>
      <div class="content">
        <h1 id="test-plan">Test Plan</h1>
        <h2 id="black-box-testing">Black box testing</h2>
        <p>Black box tests verify the properties of the mathematical entities defined in the library.</p>
        <p>Tests have defined the path in the test files, the inputs and the expected outputs.</p>
        <h3 id="polynomials">Polynomials</h3>
        <p>TC1.1 A polynomial multiplied by one returns the same polynomial. &gt; tests/polynomial/multiplicative_unity</p>
        <ul>
        <li>input: p1 (arbitrary polynomial, null polynomial), p2 (unity polynomial, scalar 1)</li>
        <li>output: p1</li>
        </ul>
        <p>TC1.2 A polynomial multiplied by zero returns zero. &gt; tests/polynomial/multiplicative_null</p>
        <ul>
        <li>input: p1 (arbitrary polynomial, null polynomial), p2 (null polynomial, scalar 0)</li>
        <li>output: null polynomial</li>
        </ul>
        <p>TC1.3 If a non-null polynomial is multiplied by another polynomial and divided by the same, the result is equal to the first polynomial. &gt; tests/polynomial/multiplicative_inverse</p>
        <ul>
        <li>input: p1 (arbitrary polynomial), p2 (arbitrary polynomial)</li>
        <li>output: p1</li>
        </ul>
        <p>TC1.4 A polynomial plus or minus zero is equal the the polynomial itself. &gt; tests/polynomial/additive_invariant</p>
        <ul>
        <li>input: p1 (arbitrary polynomial), p2 (null polynomial, scalar 0)</li>
        <li>output: p1</li>
        </ul>
        <p>TC1.5 If to a polynomial is added and subtracted another polynomial, the result is equal to the first polynomial. &gt; tests/polynomial/additive_inverse</p>
        <ul>
        <li>input: p1 (arbitrary polynomial), p2 (arbitrary polynomial)</li>
        <li>output: p1</li>
        </ul>
        <p>TC1.6 The number of roots of a polynomial is equal to its degree. &gt; tests/polynomial/roots_degree</p>
        <ul>
        <li>input: 1, 1+2x, 1+2x+3x^{2}</li>
        <li>output: Some(0), Some(1), Some(2)</li>
        </ul>
        <p>TC1.7 A null polynomial does not have a defined degree. &gt; tests/polynomial/no_degree</p>
        <ul>
        <li>input: null polynomial</li>
        <li>output: None</li>
        </ul>
        <p>TC1.8 The derivative of a polynomial has one less degree than the starting polynomial. &gt; tests/polynomial/derivation</p>
        <ul>
        <li>input: 2x+3x^{2}, 2+6x, 6</li>
        <li>output: Some(1), Some(0), None</li>
        </ul>
        <p>TC1.9 The integral of a polynomial has one more degree than the starting polynomial. &gt; tests/polynomial/integration</p>
        <ul>
        <li>input: 0, -1+x, 2-x+</li>
        <li>output: Some(0), Some(1), Some(2)</li>
        </ul>
        <p>TC1.10 The stationary points of a polynomial function are the roots of its derivative. &gt; tests/polynomial/maximum_minimum</p>
        <ul>
        <li>input: (1+x)x(-1+x)</li>
        <li>output: stationary points in x=0.57735</li>
        </ul>
        <p>TC1.11 The iterative root finding method must be stable for nearly multiple zeros ([16] page 6). &gt; tests/polynomial/nearly_multiple_zeros</p>
        <ul>
        <li>input: P4, P5, P6, P8</li>
        <li>output: roots must all be real, from root it is possible to recover the original polynomial with given error or roots must be within given error.</li>
        </ul>
        <p>TC1.12 The iterative root finding method must be stable for equimodular zeros ([16] page 7). &gt; tests/polynomial/equimodular_zeros</p>
        <ul>
        <li>input: P9</li>
        <li>outpu: there shall be 20 roots, all root must have a modulus of either 100 or 0.01</li>
        </ul>
        <h3 id="linear-systems">Linear systems</h3>
        <p>TC2.1 The initial value of the output of the system in response to a step is the limit to infinity of its transfer function ([1], para. 5.4.1). &gt; tests/linear_system/inital_value</p>
        <ul>
        <li>input: </li>
        <li>output: _{x}=0</li>
        </ul>
        <p>TC2.2 A linear system can be represented with state variables or with a transfer function. A SISO system can be transformed from the state representation to the transfer function. ([1], para. 5.5.3). &gt; tests/conversions/from_tf_to_ss</p>
        <ul>
        <li>input: </li>
        <li>output: A=[
        
        ], B=[
        
        ], C=[
        
        ], D=</li>
        </ul>
        <p>TC2.3 The poles of a system are equal to the eigenvalues of the A matrix ([1], para. 3.2.5). &gt; tests/linear_system/poles_eigenvalues</p>
        <ul>
        <li>input: , transfer function realization</li>
        <li>output: -1, -2, -3</li>
        </ul>
        <p>TC2.4 The response of an asymptotically stable system, after enough time, is independent from the initial state ([1], para. 3.4.6). &gt; tests/linear_system/initial_state_independence</p>
        <ul>
        <li>input: discrete time A=[
        
        ], B=[
        
        ], C=[
        
        ], D=, initial state 1: [
        
        ], initial state 2: [
        
        ]</li>
        <li>output: responses after 30 steps must be equal to the static gain</li>
        </ul>
        <p>TC2.5 In an asymptotically stable system, the movement of the state and output as response to a time limited input goes to zero ([1], para. 3.4.6). As response to an impulse, both the state and the output go to zero ([1], para. 3.4.6). &gt; tests/linear_system/to_zero</p>
        <ul>
        <li>input: , realization of transfer function</li>
        <li>output: 0</li>
        </ul>
        <p>TC2.6 The series connection of subsystems is asymptotically stable if and only if the subsystems are asymptotically stable ([1], para. 6.4.1). &gt; tests/linear_system/series_system</p>
        <ul>
        <li>input: G_{1}=, G_{2}=, G_{3}=</li>
        <li>output: G_{1}G_{2} is stable, G_{1}G_{3} is unstable</li>
        </ul>
        <p>TC2.7 The parallel connection of subsystems is asymptotically stable if and only if the subsystems are asymptotically stable ([1], para. 6.4.2). &gt; tests/linear_system/parallel_system</p>
        <ul>
        <li>input: G_{1}=, G_{2}=, G_{3}=</li>
        <li>output: G_{1}+G_{2} is stable, G_{1}+G_{3} is unstable</li>
        </ul>
        <h3 id="continuous-time">Continuous time</h3>
        <p>TC3.1 A linear system whose eigenvalues have negative real part is stable ([1], para. 3.4.3). &gt; tests/continuous_linear_system/stability</p>
        <ul>
        <li>input: G_{1}=, G_{2}=</li>
        <li>output: G_{1} is stable, G_{2} is unstable</li>
        </ul>
        <p>TC3.2 A system without null eigenvalues has a unique equilibrium state ([1], para. 3.3, 3.4.6). &gt; tests/continuous_linear_system/equilibrium</p>
        <ul>
        <li>input: A=[
        
        ], B=[
        
        ], C=[
        
        ], D=, input=</li>
        <li>output: state=[
        
        ], output=</li>
        </ul>
        <p>TC3.3 A system with at least one null eigenvalue has none or infinite equilibrium states ([1], para. 3.3). &gt; tests/continuous_linear_system/no_equilibrium</p>
        <ul>
        <li>input: A=[
        
        ], B=[
        
        ], C=[
        
        ], D=[
        
        ], input=[
        
        ]</li>
        <li>output: None</li>
        </ul>
        <p>TC3.4 The static gain of an asymptotically stable system in response the a step is equal to the value of its transfer function in zero ([1], para. 5.3.1). &gt; tests/continuous_linear_system/static_gain</p>
        <ul>
        <li>input: G(s)=, realization of transfer function</li>
        <li>output: G(0)=1=output after 15 seconds</li>
        </ul>
        <h3 id="discrete-time">Discrete time</h3>
        <p>TC4.1 A linear system whose eigenvalues have modulus less then one is stable ([1], para. 8.5.3). &gt; tests/discrete_linear_system/stability</p>
        <ul>
        <li>input: G_{1}=, G_{2}=</li>
        <li>output: G_{1} is stable, G_{2} is unstable</li>
        </ul>
        <p>TC4.2 A system without eigenvalues with modulus equal to one has a unique equilibrium state ([1], para. 8.4.7). &gt; tests/discrete_linear_system/equilibrium</p>
        <ul>
        <li>input: A=[
        
        ], B=[
        
        ], C=[
        
        ], D=, input=</li>
        <li>output: state=[
        
        ], output=</li>
        </ul>
        <p>TC4.3 A system with at least on eigenvalue with modulus equal to one has none of infinite equilibrium states ([1], para. 8.4.7). &gt; tests/discrete_linear_system/no_equilibrium</p>
        <ul>
        <li>input: A=[
        
        ], B=[
        
        ], C=[
        
        ], D=, input=</li>
        <li>output: None</li>
        </ul>
        <p>TC4.4 The static gain of an asymptotically stable system in response the a step is equal to the value of its transfer function in one ([1], para. 9.2.5). &gt; tests/discrete_linear_system/static_gain</p>
        <ul>
        <li>input: G(z)=, realization of transfer function</li>
        <li>output: G(1)=-2=output after 30 steps</li>
        </ul>
        <p>TC4.5 The response of a Finite Impulse Response (FIR) system to an impulse is zero after an number of steps equal to its order ([1], para. 9.3.5). &gt; tests/discrete_linear_system/fir_impulse</p>
        <ul>
        <li>input: G(z)=1.016</li>
        <li>output: output after 6 steps = 0</li>
        </ul>
        <p>TC4.6 The response of a Finite Impulse Response (FIR) system to a step is equal to its static gain after a number of steps equal to is order ([1], para. 9.3.5). &gt; tests/discrete_linear_system/fir_step</p>
        <ul>
        <li>input: G(z)=1.016</li>
        <li>output: output after 6 steps = G(1)=1</li>
        </ul>
        <p>TC4.7 The moving average of values in time is representable with a transfer function Finite Impulse Response (FIR) [1]. &gt; tests/discrete_transfer_function/left_moving_average</p>
        <ul>
        <li>input: y=G(z)=, values =[9.,8.,9.,12.,9.,12.,11.,7.,13.,9.,11.,10.]</li>
        <li>output: [x,x,8.667,9.667,10.,11.,10.667,10.,10.333,9.667,11.,10.]</li>
        </ul>
        <h3 id="diagrams">Diagrams</h3>
        <p>TC5.1 The Bode diagram of a system with two conjugate complex poles must have a resonance peak ([1], para. 5.4.4). &gt; tests/plots/bode_plot</p>
        <ul>
        <li>input: G(s)=, =0.1, _{n}=1</li>
        <li>output: |G(j<em>{n})|</em>{dB}=||_{dB}=13.9794</li>
        </ul>
        <p>TC5.2 A transfer function of a minimum phase system generates a polar diagram whose points strictly decrease with frequency increase ([1], para. 7.7). &gt; tests/plots/polar_plot</p>
        <ul>
        <li>input: G(s)=</li>
        <li>output: |G(j)| con 0.110 is strictly decreasing</li>
        </ul>
        <p>TC5.3 The number of branches of the direct root locus is equal to the degree of the denominator, the root locus is symmetric with respect to the real axis ([1], para. 13.2.2). &gt; tests/plots/root_locus_plot</p>
        <ul>
        <li>input: G(s)=</li>
        <li>output: 3 branches, symmetric, limit value for stability =120</li>
        </ul>
        <h2 id="white-box-testing">White box testing</h2>
        <p>Every module must contain a test submodule, whose purpose it to test all the functions present inside the module.</p>
        <p>This tests are dependent from the implementation of the method, it is not given a detailed description, but the requirements are listed and what the test shall verify. More information must be added in the source code.</p>
        <h3 id="module-controllers">Module controllers</h3>
        <h4 id="pid">pid</h4>
        <p>Creation of a real and ideal PID controller and generation of the related transfer function.</p>
        <h3 id="module-linear_system">Module linear_system</h3>
        <p>Creation of the structure that contains the dimensions of a system and check of the correct initialization of a system.</p>
        <p>Calculation of the eigenvalues of a system of first, second and third order.</p>
        <p>Le Verrier algorithm with single and double precision floating point numbers, both on a 1x1 matrix and higher dimensions.</p>
        <p>Conversion from a transfer function to a representation with state variables, both through the canonical observability and controllability form.</p>
        <p>Calculation of the observability and controllability matrices.</p>
        <h4 id="continuous">continuous</h4>
        <p>Determination of an equilibrium point and the evaluation of the stability of a system.</p>
        <p>Evolution of a system using Runge-Kutta method of order 2 and 4, the Runge-Kutta-Fehlberg method of order 4/5 and the Radau method.</p>
        <h4 id="discrete">discrete</h4>
        <p>Determination of and equilibrium point and the evaluation of the stability of a system.</p>
        <p>Evolution of a system with input supplied as a function or an iterator.</p>
        <p>Discretization of a continuous time system using forward Euler, backward Euler and Tustin methods. Backward Euler and Tustin methods can fail.</p>
        <h4 id="solver">solver</h4>
        <p>Creation of the data structures that are returned by the integrators.</p>
        <h3 id="module-plots">Module plots</h3>
        <h4 id="bode">bode</h4>
        <p>Creation of the iterator that supplies the diagram points, both as absolute values / Hertz and decibel / radians per second and counting of supplied points.</p>
        <p>Creation of the structure that represents the points of the diagram.</p>
        <h4 id="polar">polar</h4>
        <p>Creation of the iterator that supplies the diagram points and counting of supplied points.</p>
        <p>Creation of the structure that represents the points of the diagram.</p>
        <h4 id="root_locus">root_locus</h4>
        <p>Correctness of the parameters for the creation of the data structure of the diagram.</p>
        <h3 id="module-polynomial">Module polynomial</h3>
        <p>Formatting polynomial as string.</p>
        <p>Creation from coefficient and from roots, supplied both as a list and as a iterator, creation of the null and unity polynomial.</p>
        <p>Return coefficients as a list.</p>
        <p>Calculation of the length and the degree of the polynomial.</p>
        <p>Extension with zeros of the high degree coefficients.</p>
        <p>Evaluation of the polynomial both with real and complex numbers.</p>
        <p>Indexing of polynomial coefficients.</p>
        <p>Derivative and integral of the polynomial.</p>
        <p>Transformation into a monic polynomial and return of the leading coefficient.</p>
        <p>Rounding towards zero of the coefficients.</p>
        <p>Creation of the companion matrix.</p>
        <p>Calculation of the real and complex roots of a polynomial of first, second and third degree, both with the method of eigenvalues and the iterative method. The null roots shall be removed from the calculation.</p>
        <h4 id="arithmetic">arithmetic</h4>
        <p>Arithmetic operations defined between polynomial and with real numbers.</p>
        <p>Evaluation of polynomial ratios without overflows.</p>
        <p>Multiplication through fast Fourier transformation.</p>
        <h4 id="fft">fft</h4>
        <p>Bit permutation of a integer number.</p>
        <p>Calculation of the direct and inverse fast Fourier transformation.</p>
        <h4 id="roots">roots</h4>
        <p>Calculation of the roots with iterative method.</p>
        <h3 id="module-polynomial_matrix">Module polynomial_matrix</h3>
        <h4 id="polymatrix">PolyMatrix</h4>
        <p>Creation of a polynomial whose elements are matrices, eliminating null terms.</p>
        <p>Multiplication coefficient by coefficient times a matrix both on the right and on the left.</p>
        <p>Evaluation supplying a matrix of values.</p>
        <p>Addition between polynomials of matrices.</p>
        <h4 id="matrixofpoly">MatrixOfPoly</h4>
        <p>Creation of a matrix whose elements are polynomial, that can be indexed.</p>
        <p>If the matrix has dimension 1x1 it is possible to extract the single element.</p>
        <h3 id="module-signals">Module signals</h3>
        <h4 id="continuous-1">continuous</h4>
        <p>Creation and output of a null, impulse, step and sinusoidal signal.</p>
        <h4 id="discrete-1">discrete</h4>
        <p>Creation and output of a null, impulse and step signal.</p>
        <h3 id="module-transfer_function">Module transfer_function</h3>
        <p>Creation of a transfer function.</p>
        <p>Evaluation of a transfer function given a complex number.</p>
        <p>Inversion of a function and arithmetical operations of negation, addition, subtraction, multiplication and division.</p>
        <p>Calculation of poles and zeros, both real and complex.</p>
        <p>Determination of the system given a function with a unitary positive or negative feedback.</p>
        <p>Formatting of the function as a string.</p>
        <p>Normalization of the function with a monic polynomial as denominator.</p>
        <h4 id="continuous-2">continuous</h4>
        <p>Creation of a delay function.</p>
        <p>Calculation of the static gain.</p>
        <p>Determination of the stability of a system.</p>
        <p>Creation of a Bode diagram, polar diagram and a root locus diagram.</p>
        <p>Calculation of the initial value of the system evolution and its first derivative.</p>
        <p>Calculation of the sensitivity, complementary sensitivity and control sensitivity functions.</p>
        <h4 id="discrete-2">discrete</h4>
        <p>Creation of a transfer function of a discrete time system and a delay function.</p>
        <p>Calculation of the initial value of the system evolution.</p>
        <p>Calculation of the static gain.</p>
        <p>Determination of the stability of a system.</p>
        <p>Evaluation of the function given a complex number.</p>
        <p>Creation of an autoregressive moving average form.</p>
        <h4 id="discretization">discretization</h4>
        <p>Creation of a discrete time transfer function from a continuous time one.</p>
        <p>Check of the correct discretization with forward Euler, backward Euler and Tustin methods.</p>
        <h4 id="matrix">matrix</h4>
        <p>Creation of a matrix of transfer functions.</p>
        <p>Evaluation of the matrix given a vector of complex numbers.</p>
        <p>Indexing and formatting as string of the matrix.</p>
        <h3 id="module-units">Module units</h3>
        <p>Creation of decibel from floating point numbers.</p>
        <p>Conversion between Hertz and radians per second. Inversion between seconds and Hertz.</p>
        <p>Formatting of units of measurement as strings.</p>
        <h3 id="module-utils">Module utils</h3>
        <p>Determination of the pulse and the dump of a complex number.</p>
        <p>Zip two iterators with different lengths, also through a function, at the shortest elements are added.</p>
        <h3 id="module-error">Module error</h3>
        <p>String and debug string representation of Error.</p>
        <h2 id="documentation-tests">Documentation tests</h2>
        <p>Every public method of the library shall have a documentation in the source code, in addition there shall be an example of the use of the method.</p>
        <p>This example it will compiled and executed during the test phase, ensuring that the documentation remains aligned with the code modifications.</p>
        <h2 id="test-coverage">Test coverage</h2>
        <p>The test development shall tend to obtain the maximum line coverage.</p>
        <p>The program to determine the test coverage is <code>tarpaulin</code> [15], it is executed during the continuous integration phases.</p>
      </div>
    </div>
  </body>
</html>
